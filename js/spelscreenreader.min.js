function handleSpecialKeys(e,a){var t="";if(void 0==i)var i=[[" ampersand ","&"],[" caret ","^"],[" comma ",","],[" dollar ","$"],[" dot ","."],[" greater than ",">"],[" less than ","<"],[" exclamation ","!"],[" hash ","#"],[" left bracket ","["],[" left brace ","{"],[" left parenthesis ","("],[" minus ","-"],[" modulo ","%"],[" new line ","\n"],[" right parenthesis ",")"],[" plus ","+"],[" question mark ","?"],[" quotes ",'"'],[" quote ","'"],[" right brace ","}"],[" right bracket ","]"],[" semicolon ",";"],[" tilde ","~"],[" tab ","\t"],[" times ","*"],[" underscore ","_"],[" space "," "]];if(13==a.keyCode)t="newline";else for(var s=!1,o=0;o<=i.length-1&&0==s;)e==i[o][1]&&(s=!0,t+=i[o][0]),o++;return t}meSpeak.loadConfig("/js/mespeak_config.json"),meSpeak.loadVoice("/js/voices/en/en.json"),meSpeak.loadVoice("/js/voices/en/en.json");var buffer="";$(document).on("keypress","textarea, input",function(e){meSpeak.loadConfig("/js/mespeak_config.json"),meSpeak.loadVoice("/js/voices/en/en.json");var a=getCookie("mespeak_speed"),t=getCookie("mespeak_variant");if("true"==getCookie("isKeyboard"))if("key1"==getCookie("keyboardVariant")){var i=String.fromCharCode(e.which);i+=s=handleSpecialKeys(i,e),meSpeak.speak(i,{speed:a,variant:t})}else if("key2"==getCookie("keyboardVariant")){"."!=(i=String.fromCharCode(e.which))&&(buffer+=i);var s=handleSpecialKeys(i,e);buffer+=s,"."!=i&&" "!=i&&13!=e.keyCode||(meSpeak.speak(buffer,{speed:a,variant:t}),buffer="")}}),$(document).on("blur","a, audio, input, button, textarea, img, th, pre, h1, h2, h3, h4, h5, h6, p, span, code",function(){meSpeak.stop()}),$(document).on("focus","a, audio, input, button, textarea, img, th, pre, h1, h2, h3, h4, h5, h6, p, span, code",function(){meSpeak.loadConfig("/js/mespeak_config.json"),meSpeak.loadVoice("/js/voices/en/en.json");var e=getCookie("isMeSpeak"),a=getCookie("mespeak_variant"),t=getCookie("isSpeakAllText");if("true"==e){var i=getCookie("mespeak_speed");i*=2;var s=$(this).text(),o=$(this).attr("type"),r=$(this).prop("tagName");if("AUDIO"==r||"audio"==r)meSpeak.speak("Press tab then space to play audio",{speed:i,variant:a});else if("INPUT"==r||"input"==r){$(this).attr("name");var n=$(this).attr("placeholder"),p="";if(p=o.match("checkbox")?$(this).is(":checked"):$(this).val(),$(this).is("[readonly]"))d=",,readonly";else d="";var l=r+", "+d+", "+o+", "+p,k=$(this).attr("id");if(l+=". The label is"+(c=$("label[for='"+this.id+"']")).text(),"slider"==o||"radio"==o){var h=$(this).attr("name");"set screen reader variant"==h||"magnificationValue"==h?meSpeak.speak(l+" Press the up and down arrow keys to change value",{speed:i,variant:a}):meSpeak.speak(l+" Press tab to go to the ok button.",{speed:i,variant:a})}else"checkbox"==o?meSpeak.speak(l+" Press the spacebar to toggle value",{speed:i,variant:a}):(null!=n&&(l+=",,The help text is"+n),meSpeak.speak(l,{speed:i,variant:a}))}else if("textarea"==r||"TEXTAREA"==r){$(this).attr("name");p=punct($(this).val());if($(this).is("[readonly]"))var d=",,readonly";l="input text,"+d+","+p;null!=(n=$(this).attr("placeholder"))&&(l+=". The help text is"+n);var k=$(this).attr("id"),c=$("label[for='"+this.id+"']");l+=". The label is"+c.text(),"loquacious"!=k&&"loquacious0"!=k&&meSpeak.speak(l,{speed:i,variant:a})}else if("a"==r||"A"==r||"button"==r||"BUTTON"==r){s="link "+s;meSpeak.speak(s,{speed:i,variant:a})}else if("th"==r||"TH"==r){l="table header, "+$(this).attr("aria-label");meSpeak.speak(l,{speed:i,variant:a})}else"true"==t?("pre"!=r&&"PRE"!=r&&"code"!=r&&"CODE"!=r||(s=punct(s)),meSpeak.speak(s,{speed:i,variant:a})):meSpeak.speak(s,{speed:i,variant:a})}"key1"==getCookie("keyboardVariant")||getCookie("keyboardVariant")});